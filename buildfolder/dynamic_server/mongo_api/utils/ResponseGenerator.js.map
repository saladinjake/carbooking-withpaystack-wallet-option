{"version":3,"sources":["../../../../server/dynamic_server/mongo_api/utils/ResponseGenerator.js"],"names":["ResponseGenerator","status","type","data","message","res","statusCode","send","filteredResponse","Utils","stripNull","json","error"],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAAA;;AAEA;;;IAGMA,iB;;;AACJ,+BAAc;AAAA;AAAA;AAAA;AACZ,SAAKC,MAAL,GAAc,IAAd;AADY;AAEZ,SAAKC,IAAL,GAAY,IAAZ;AAFY;AAGZ,SAAKC,IAAL,GAAY,IAAZ;AAHY;AAIZ,SAAKC,OAAL,GAAe,IAAf;AACD;AAED;;;;;;;;;;gCAMYC,G,EAAKC,U,EAAYH,I,EAAMC,O,EAAS;AAAA;AAAA;AAC1C,WAAKH,MAAL,GAAcK,UAAd;AAD0C;AAE1C,WAAKH,IAAL,GAAYA,IAAZ;AAF0C;AAG1C,WAAKC,OAAL,GAAeA,OAAf;AAH0C;AAI1C,WAAKF,IAAL,GAAY,SAAZ;AAJ0C;AAM1C,aAAO,KAAKK,IAAL,CAAUF,GAAV,CAAP;AACD;AAED;;;;;;;;;8BAMUA,G,EAAKC,U,EAAYF,O,EAAS;AAAA;AAAA;AAClC,WAAKH,MAAL,GAAcK,UAAd;AADkC;AAElC,WAAKF,OAAL,GAAeA,OAAf;AAFkC;AAGlC,WAAKF,IAAL,GAAY,OAAZ;AAHkC;AAKlC,aAAO,KAAKK,IAAL,CAAUF,GAAV,CAAP;AACD;AAED;;;;;;;;yBAKKA,G,EAAK;AAAA;AACR,UAAMG,gBAAgB,2BAAGC,mBAAMC,SAAN,CAAgB;AACvCT,QAAAA,MAAM,EAAE,KAAKA,MAD0B;AAEvCG,QAAAA,OAAO,EAAE,KAAKA,OAFyB;AAGvCD,QAAAA,IAAI,EAAE,KAAKA;AAH4B,OAAhB,CAAH,CAAtB;AADQ;;AAOR,UAAI,KAAKD,IAAL,KAAc,SAAlB,EAA6B;AAAA;AAAA;AAC3B,eAAOG,GAAG,CAACJ,MAAJ,CAAW,KAAKA,MAAhB,EAAwBU,IAAxB,CAA6BH,gBAA7B,CAAP;AACD,OAFD;AAAA;AAAA,OAPQ,CAUR;;;AAVQ;AAWR,aAAOH,GAAG,CAACJ,MAAJ,CAAW,KAAKA,MAAhB,EAAwBU,IAAxB,CAA6B;AAClCV,QAAAA,MAAM,EAAE,KAAKA,MADqB;AAElCW,QAAAA,KAAK,EAAE,KAAKR;AAFsB,OAA7B,CAAP;AAID;;;;;eAGYJ,iB","sourcesContent":["import Utils from './common';\n\n/**\n * A class for generating API responses\n */\nclass ResponseGenerator {\n  constructor() {\n    this.status = null;\n    this.type = null;\n    this.data = null;\n    this.message = null;\n  }\n\n  /**\n   * @description API response for 200 & 201\n   * @param{int} statusCode\n   * @param {object} data\n   * @param{string} message\n   */\n  sendSuccess(res, statusCode, data, message) {\n    this.status = statusCode;\n    this.data = data;\n    this.message = message;\n    this.type = 'success';\n\n    return this.send(res);\n  }\n\n  /**\n   * @description API response for 400, 401, 403, 404, 503\n   * @param{int} statusCode\n   * @param{string} message\n   * @param {object} data\n   */\n  sendError(res, statusCode, message) {\n    this.status = statusCode;\n    this.message = message;\n    this.type = 'error';\n\n    return this.send(res);\n  }\n\n  /**\n   * Sends response\n   * @param {object} res\n   * @returns {object} response\n  */\n  send(res) {\n    const filteredResponse = Utils.stripNull({\n      status: this.status,\n      message: this.message,\n      data: this.data,\n    });\n\n    if (this.type === 'success') {\n      return res.status(this.status).json(filteredResponse);\n    }\n    // Here this.type === 'error'\n    return res.status(this.status).json({\n      status: this.status,\n      error: this.message,\n    });\n  }\n}\n\nexport default ResponseGenerator;\n"],"file":"ResponseGenerator.js"}