{"version":3,"sources":["../../../../server/dynamic_server/mongo_api/utils/genTokens.js"],"names":["dotenv","config","jwt","require","createToken","auth","sign","id","process","env","SECRET","expiresIn","module","exports","generateToken","req","res","next","token","sendToken","setHeader","status","send","JSON","stringify","user"],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAAA;;;;AACAA,mBAAOC,MAAP;;AACA,IAAIC,GAAG,2BAAGC,OAAO,CAAC,cAAD,CAAV,CAAP;;;AAEA,IAAIC,WAAW,GAAG,SAAdA,WAAc,CAASC,IAAT,EAAe;AAAA;AAAA;AAC7B,SAAOH,GAAG,CAACI,IAAJ,CAAS;AACRC,IAAAA,EAAE,EAAEF,IAAI,CAACE;AADD,GAAT,EAEAC,OAAO,CAACC,GAAR,CAAYC,MAFZ,EAGH;AACIC,IAAAA,SAAS,EAAE,KAAK;AADpB,GAHG,CAAP;AAMH,CAPD;;;AASAC,MAAM,CAACC,OAAP,GAAiB;AACfC,EAAAA,aAAa,EAAE,uBAASC,GAAT,EAAcC,GAAd,EAAmBC,IAAnB,EAAyB;AAAA;AAAA;AACpCF,IAAAA,GAAG,CAACG,KAAJ,GAAYd,WAAW,CAACW,GAAG,CAACV,IAAL,CAAvB;AADoC;AAEpC,WAAOY,IAAI,EAAX;AACH,GAJc;AAKfE,EAAAA,SAAS,EAAE,mBAASJ,GAAT,EAAcC,GAAd,EAAmB;AAAA;AAAA;AAC1BA,IAAAA,GAAG,CAACI,SAAJ,CAAc,cAAd,EAA8BL,GAAG,CAACG,KAAlC;AAD0B;AAE1B,WAAOF,GAAG,CAACK,MAAJ,CAAW,GAAX,EAAgBC,IAAhB,CAAqBC,IAAI,CAACC,SAAL,CAAeT,GAAG,CAACU,IAAnB,CAArB,CAAP;AACH;AARc,CAAjB","sourcesContent":["import dotenv from 'dotenv';\ndotenv.config();\nvar jwt = require('jsonwebtoken');\n\nvar createToken = function(auth) {\n    return jwt.sign({\n            id: auth.id\n        }, process.env.SECRET,\n        {\n            expiresIn: 60 * 120\n        });\n};\n\nmodule.exports = {\n  generateToken: function(req, res, next) {\n      req.token = createToken(req.auth);\n      return next();\n  },\n  sendToken: function(req, res) {\n      res.setHeader('x-auth-token', req.token);\n      return res.status(200).send(JSON.stringify(req.user));\n  }\n};"],"file":"genTokens.js"}