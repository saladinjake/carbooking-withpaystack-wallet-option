{"version":3,"sources":["../../../../server/dynamic_server/mongo_api/config/paystack.js"],"names":["dotenv","config","api_url_init","api_url_verify","paystack","request","MySecretKey","process","env","PAYSTACKSECRET","initializePayment","form","mycallback","options","url","headers","authorization","callback","error","response","body","post","verifyPayment","ref","encodeURIComponent","module","exports"],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAAA;;;;AACAA,mBAAOC,MAAP;;AACA,IAAMC,YAAY,0BAAG,gDAAH,CAAlB;AACA,IAAMC,cAAc,0BAAG,6CAAH,CAApB;AACA;;AACA;;AACA;;;;AACA,IAAMC,QAAQ,GAAG,SAAXA,QAAW,CAAAC,OAAO,EAAI;AAAA;AAC1B,MAAMC,WAAW,0BAAG,YAAYC,OAAO,CAACC,GAAR,CAAYC,cAA3B,CAAjB,CAD0B,CACkC;;AADlC;;AAG1B,MAAMC,iBAAiB,GAAG,SAApBA,iBAAoB,CAACC,IAAD,EAAOC,UAAP,EAAsB;AAAA;AAC9C,QAAMC,OAAO,0BAAG;AACdC,MAAAA,GAAG,EAAEZ,YADS;AAEda,MAAAA,OAAO,EAAE;AACPC,QAAAA,aAAa,EAAEV,WADR;AAEP,wBAAgB,kBAFT;AAGP,yBAAiB;AAHV,OAFK;AAOdK,MAAAA,IAAI,EAAJA;AAPc,KAAH,CAAb;AAD8C;;AAU9C,QAAMM,QAAQ,GAAG,SAAXA,QAAW,CAACC,KAAD,EAAQC,QAAR,EAAkBC,IAAlB,EAA2B;AAAA;AAAA;AAC1C,aAAOR,UAAU,CAACM,KAAD,EAAQE,IAAR,CAAjB;AACD,KAFD;;AAV8C;AAa9Cf,IAAAA,OAAO,CAACgB,IAAR,CAAaR,OAAb,EAAsBI,QAAtB;AACD,GAdD;;AAH0B;;AAmB1B,MAAMK,aAAa,GAAG,SAAhBA,aAAgB,CAACC,GAAD,EAAMX,UAAN,EAAqB;AAAA;AACzC,QAAMC,OAAO,2BAAG;AACdC,MAAAA,GAAG,EAAEX,cAAc,GAAGqB,kBAAkB,CAACD,GAAD,CAD1B;AAEdR,MAAAA,OAAO,EAAE;AACPC,QAAAA,aAAa,EAAEV,WADR;AAEP,wBAAgB,kBAFT;AAGP,yBAAiB;AAHV;AAFK,KAAH,CAAb;AADyC;;AASzC,QAAMW,QAAQ,GAAG,SAAXA,QAAW,CAACC,KAAD,EAAQC,QAAR,EAAkBC,IAAlB,EAA2B;AAAA;AAAA;AAC1C,aAAOR,UAAU,CAACM,KAAD,EAAQE,IAAR,CAAjB;AACD,KAFD;;AATyC;AAYzCf,IAAAA,OAAO,CAACQ,OAAD,EAAUI,QAAV,CAAP;AACD,GAbD;;AAnB0B;AAkC1B,SAAO;AAAEP,IAAAA,iBAAiB,EAAjBA,iBAAF;AAAqBY,IAAAA,aAAa,EAAbA;AAArB,GAAP;AACD,CAnCD;;;AAqCAG,MAAM,CAACC,OAAP,GAAiBtB,QAAjB","sourcesContent":["import dotenv from 'dotenv';\ndotenv.config();\nconst api_url_init = 'https://api.paystack.co/transaction/initialize';\nconst api_url_verify = 'https://api.paystack.co/transaction/verify/';\n/****************************************************************/\n/******* @author saladin jake (Victor juwa) ********************************/\n/******* @desc Express js || ****************/\nconst paystack = request => {\n  const MySecretKey = 'Bearer ' + process.env.PAYSTACKSECRET; //saladin\n\n  const initializePayment = (form, mycallback) => {\n    const options = {\n      url: api_url_init,\n      headers: {\n        authorization: MySecretKey,\n        'content-type': 'application/json',\n        'cache-control': 'no-cache',\n      },\n      form,\n    };\n    const callback = (error, response, body) => {\n      return mycallback(error, body);\n    };\n    request.post(options, callback);\n  };\n\n  const verifyPayment = (ref, mycallback) => {\n    const options = {\n      url: api_url_verify + encodeURIComponent(ref),\n      headers: {\n        authorization: MySecretKey,\n        'content-type': 'application/json',\n        'cache-control': 'no-cache',\n      },\n    };\n    const callback = (error, response, body) => {\n      return mycallback(error, body);\n    };\n    request(options, callback);\n  };\n\n  return { initializePayment, verifyPayment };\n};\n\nmodule.exports = paystack;\n"],"file":"paystack.js"}