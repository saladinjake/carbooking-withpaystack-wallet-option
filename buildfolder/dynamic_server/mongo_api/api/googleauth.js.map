{"version":3,"sources":["../../../../server/dynamic_server/mongo_api/api/googleauth.js"],"names":["require","google","config","googleApi","clientID","clientSecret","callbackURL","oAuth2Client","auth","OAuth2","scopes","url","generateAuthUrl","access_type","scope","join","code","getToken","credentials","setCredentials","tokens","plus","version","people","get","userId","data","module","exports"],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAAA,mCAAmBA,OAAO,CAAC,YAAD,CAA1B;AAAA,IAAQC,MAAR,QAAQA,MAAR;;AACA,IAAIC,MAAM,2BAAGF,OAAO,CAAC,2BAAD,CAAV,CAAV;AACA;;AACA;;AACA;;IACMG,S;AACJ,uBAAc;AAAA;AAAA;;AACZ,wCAAgDD,MAAM,CAACD,MAAvD;AAAA,QAAQG,QAAR,SAAQA,QAAR;AAAA,QAAkBC,YAAlB,SAAkBA,YAAlB;AAAA,QAAgCC,WAAhC,SAAgCA,WAAhC;;AADY;AAEZ,SAAKC,YAAL,GAAoB,IAAIN,MAAM,CAACO,IAAP,CAAYC,MAAhB,CAAuBL,QAAvB,EAAiCC,YAAjC,EAA+CC,WAA/C,CAApB;AACD;;;;WAED,qBAAYI,MAAZ,EAAoB;AAAA;AAClB,UAAMC,GAAG,2BAAG,KAAKJ,YAAL,CAAkBK,eAAlB,CAAkC;AAC5CC,QAAAA,WAAW,EAAE,SAD+B;AAE5CC,QAAAA,KAAK,EAAEJ,MAAM,CAACK,IAAP,CAAY,GAAZ;AAFqC,OAAlC,CAAH,CAAT;AADkB;AAKlB,aAAOJ,GAAP;AACD;;;;uGAED,iBAAkBK,IAAlB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,uBAC4B,KAAKT,YAAL,CAAkBU,QAAlB,CAA2BD,IAA3B,CAD5B;;AAAA;AACQE,gBAAAA,WADR;AAAA;AAEE,qBAAKX,YAAL,CAAkBY,cAAlB,CAAiCD,WAAW,CAACE,MAA7C;AACMC,gBAAAA,IAHR,2BAGepB,MAAM,CAACoB,IAAP,CAAY;AACvBC,kBAAAA,OAAO,EAAE,IADc;AAEvBd,kBAAAA,IAAI,EAAE,KAAKD;AAFY,iBAAZ,CAHf;AAAA;AAAA;AAAA,uBAOqBc,IAAI,CAACE,MAAL,CAAYC,GAAZ,CAAgB;AAAEC,kBAAAA,MAAM,EAAE;AAAV,iBAAhB,CAPrB;;AAAA;AAOQC,gBAAAA,IAPR;AAAA;AAAA,iDAQSA,IART;;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,O;;;;;;;;;;;;;AAYFC,MAAM,CAACC,OAAP,GAAiB,IAAIzB,SAAJ,EAAjB","sourcesContent":["const { google } = require('googleapis');\nvar config = require('../../config/mongo_config');\n/****************************************************************/\n/******* @author saladin jake (Victor juwa) ********************************/\n/******* @desc Express js || ****************/\nclass googleApi {\n  constructor() {\n    const { clientID, clientSecret, callbackURL } = config.google;\n    this.oAuth2Client = new google.auth.OAuth2(clientID, clientSecret, callbackURL);\n  }\n\n  generateUrl(scopes) {\n    const url = this.oAuth2Client.generateAuthUrl({\n      access_type: 'offline',\n      scope: scopes.join(' '),\n    });\n    return url;\n  }\n\n  async getUserInfo(code) {\n    const credentials = await this.oAuth2Client.getToken(code);\n    this.oAuth2Client.setCredentials(credentials.tokens);\n    const plus = google.plus({\n      version: 'v1',\n      auth: this.oAuth2Client,\n    });\n    const data = await plus.people.get({ userId: 'me' });\n    return data;\n  }\n}\n\nmodule.exports = new googleApi();\n"],"file":"googleauth.js"}