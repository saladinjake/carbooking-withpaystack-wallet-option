{"version":3,"sources":["../../../../server/dynamic_server/mongo_api/api/googleauth.js"],"names":["require","google","config","googleApi","clientID","clientSecret","callbackURL","oAuth2Client","auth","OAuth2","scopes","url","generateAuthUrl","access_type","scope","join","code","getToken","credentials","setCredentials","tokens","plus","version","people","get","userId","data","module","exports"],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;mCAAmBA,OAAO,CAAC,YAAD,C;IAAlBC,M,QAAAA,M;;AACR,IAAIC,MAAM,2BAAGF,OAAO,CAAC,2BAAD,CAAV,CAAV;;IACMG,S;;;AACF,uBAAa;AAAA;AAAA;;AAAA,wCAGsCD,MAAM,CAACD,MAH7C;AAAA,QAGDG,QAHC,SAGDA,QAHC;AAAA,QAGSC,YAHT,SAGSA,YAHT;AAAA,QAGsBC,WAHtB,SAGsBA,WAHtB;;AAAA;AAIT,SAAKC,YAAL,GAAoB,IAAIN,MAAM,CAACO,IAAP,CAAYC,MAAhB,CAAuBL,QAAvB,EAAiCC,YAAjC,EAA8CC,WAA9C,CAApB;AACH;;;;gCAEWI,M,EAAO;AAAA;AACf,UAAMC,GAAG,2BAAG,KAAKJ,YAAL,CAAkBK,eAAlB,CAAkC;AAC1CC,QAAAA,WAAW,EAAE,SAD6B;AAE1CC,QAAAA,KAAK,EAAEJ,MAAM,CAACK,IAAP,CAAY,GAAZ;AAFmC,OAAlC,CAAH,CAAT;AADe;AAKf,aAAOJ,GAAP;AACH;;;gCAEiBK,I;;;;;;;;;mDACY,KAAKT,YAAL,CAAkBU,QAAlB,CAA2BD,IAA3B,C;;;AAApBE,cAAAA,W;;AACN,mBAAKX,YAAL,CAAkBY,cAAlB,CAAiCD,WAAW,CAACE,MAA7C;AACMC,cAAAA,I,2BAAOpB,MAAM,CAACoB,IAAP,CAAY;AACrBC,gBAAAA,OAAO,EAAE,IADY;AAErBd,gBAAAA,IAAI,EAAE,KAAKD;AAFU,eAAZ,C;;;mDAIMc,IAAI,CAACE,MAAL,CAAYC,GAAZ,CAAgB;AAACC,gBAAAA,MAAM,EAAE;AAAT,eAAhB,C;;;AAAbC,cAAAA,I;;+CACCA,I;;;;;;;;;;;;;;AAIfC,MAAM,CAACC,OAAP,GAAiB,IAAIzB,SAAJ,EAAjB","sourcesContent":["const { google } = require('googleapis')\r\nvar config = require('../../config/mongo_config');\r\nclass googleApi {\r\n    constructor(){\r\n        \r\n  \r\n        const { clientID, clientSecret,callbackURL } = config.google;\r\n        this.oAuth2Client = new google.auth.OAuth2(clientID, clientSecret,callbackURL)\r\n    }\r\n\r\n    generateUrl(scopes){\r\n        const url = this.oAuth2Client.generateAuthUrl({\r\n            access_type: 'offline',\r\n            scope: scopes.join(' ')\r\n        })\r\n        return url;\r\n    }\r\n\r\n    async getUserInfo(code){\r\n        const credentials = await this.oAuth2Client.getToken(code)\r\n        this.oAuth2Client.setCredentials(credentials.tokens);\r\n        const plus = google.plus({\r\n            version: 'v1',\r\n            auth: this.oAuth2Client,\r\n        });\r\n        const data = await plus.people.get({userId: 'me'});\r\n        return data;\r\n    }\r\n}\r\n\r\nmodule.exports = new googleApi();"],"file":"googleauth.js"}