{"version":3,"sources":["../../../../server/dynamic_server/mongo_api/api/intervention_routes.js"],"names":["SUBMIT_INTERVENTION_LINK","INTERVENTIONS_GET_SPECIFIC_LINK","INTERVENTION_LOCATION_LINK","INTERVENTION_COMMENT_LINK","INTERVENTION_STATUS_LINK","InterventionRoutes","router","post","request","response","status","json","message","body","TokenVerification","userAuthentication","SubmitEventValidator","validateSubmit","InterventionController","createIntervention","get","allInterventions","validateId","interventionId","patch","validateLocation","interventionLocation","validateComment","editInterventionComment","deleteIntervention","adminAuthentication","validateStatus","updateInterventionStatus","usersInterventions"],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAAA;;AACA;;AACA;;AACA;AACA,IAAMA,wBAAwB,2BAAG,gBAAH,CAA9B;AACA,IAAMC,+BAA+B,2BAAG,oBAAH,CAArC;AACA,IAAMC,0BAA0B,2BAAG,6BAAH,CAAhC;AACA,IAAMC,yBAAyB,2BAAG,4BAAH,CAA/B;AACA,IAAMC,wBAAwB,2BAAG,2BAAH,CAA9B;;IACMC,kB;;;AACJ,8BAAYC,MAAZ,EAAoB;AAAA;AAAA;AAAA;AAClB;AACA,SAAKA,MAAL,GAAcA,MAAd;AACD;;;;mCAEc;AAAA;AAAA;AACb,WAAKA,MAAL,CAAYC,IAAZ,CAAiB,OAAjB,EAA0B,UAACC,OAAD,EAAUC,QAAV,EACxB;AAAA;AAAA;AAAA,eAAAA,QAAQ,CAACC,MAAT,CAAgB,GAAhB,EAAqBC,IAArB,CAA0B;AACxBC,UAAAA,OAAO,EAAE,0BADe;AAExBC,UAAAA,IAAI,EAAEL,OAAO,CAACK;AAFU,SAA1B;AAGE,OAJJ;AADa;AAOb,WAAKP,MAAL,CAAYC,IAAZ,CACE,gBADF,EAEEO,4BAAkBC,kBAFpB,EAGEC,2BAAqBC,cAHvB,EAIEC,oCAAuBC,kBAJzB;AAPa;AAcb,WAAKb,MAAL,CAAYc,GAAZ,CACEpB,wBADF,EAEEc,4BAAkBC,kBAFpB,EAGEG,oCAAuBG,gBAHzB;AAda;AAoBb,WAAKf,MAAL,CAAYc,GAAZ,CACEnB,+BADF,EAEEa,4BAAkBC,kBAFpB,EAGEC,2BAAqBM,UAHvB,EAIEJ,oCAAuBK,cAJzB;AApBa;AA2Bb,WAAKjB,MAAL,CAAYkB,KAAZ,CACEtB,0BADF,EAEEY,4BAAkBC,kBAFpB,EAGEC,2BAAqBM,UAHvB,EAIEN,2BAAqBS,gBAJvB,EAKEP,oCAAuBQ,oBALzB;AA3Ba;AAmCb,WAAKpB,MAAL,CAAYkB,KAAZ,CACErB,yBADF,EAEEW,4BAAkBC,kBAFpB,EAGEC,2BAAqBM,UAHvB,EAIEN,2BAAqBW,eAJvB,EAKET,oCAAuBU,uBALzB;AAnCa;AA2Cb,WAAKtB,MAAL,WACEF,wBADF,EAEEU,4BAAkBC,kBAFpB,EAGEC,2BAAqBM,UAHvB,EAIEJ,oCAAuBW,kBAJzB;AA3Ca;AAkDb,WAAKvB,MAAL,CAAYkB,KAAZ,CACEpB,wBADF,EAEEU,4BAAkBC,kBAFpB,EAGED,4BAAkBgB,mBAHpB,EAIEd,2BAAqBM,UAJvB,EAKEN,2BAAqBe,cALvB,EAMEb,oCAAuBc,wBANzB;AAlDa;AA4Db,WAAK1B,MAAL,CAAYc,GAAZ,CACE,2BADF,EAEEN,4BAAkBC,kBAFpB,EAGEC,2BAAqBM,UAHvB,EAICJ,oCAAuBe,kBAJxB;AA5Da;AAmEb,aAAO,KAAK3B,MAAZ;AACD;;;;;eAGYD,kB","sourcesContent":["import InterventionController from '../controllers/intervention_controller';\nimport TokenVerification from '../middlewares/token_validator';\nimport SubmitEventValidator from '../middlewares/post_sanitizer';\n// import BridgeRoutes from './routes';\nconst SUBMIT_INTERVENTION_LINK = '/interventions';\nconst INTERVENTIONS_GET_SPECIFIC_LINK = '/interventions/:id';\nconst INTERVENTION_LOCATION_LINK = '/interventions/:id/location';\nconst INTERVENTION_COMMENT_LINK = '/interventions/:id/comment';\nconst INTERVENTION_STATUS_LINK = '/interventions/:id/status';\nclass InterventionRoutes {\n  constructor(router) {\n    // super(router);\n    this.router = router;\n  }\n\n  attachRoutes() {\n    this.router.post('/test', (request, response) =>\n      response.status(200).json({\n        message: 'Welcome to iReporter API',\n        body: request.body,\n      }),\n    );\n    this.router.post(\n      '/interventions',\n      TokenVerification.userAuthentication,\n      SubmitEventValidator.validateSubmit,\n      InterventionController.createIntervention,\n    );\n\n    this.router.get(\n      SUBMIT_INTERVENTION_LINK,\n      TokenVerification.userAuthentication,\n      InterventionController.allInterventions,\n    );\n\n    this.router.get(\n      INTERVENTIONS_GET_SPECIFIC_LINK,\n      TokenVerification.userAuthentication,\n      SubmitEventValidator.validateId,\n      InterventionController.interventionId,\n    );\n\n    this.router.patch(\n      INTERVENTION_LOCATION_LINK,\n      TokenVerification.userAuthentication,\n      SubmitEventValidator.validateId,\n      SubmitEventValidator.validateLocation,\n      InterventionController.interventionLocation,\n    );\n\n    this.router.patch(\n      INTERVENTION_COMMENT_LINK,\n      TokenVerification.userAuthentication,\n      SubmitEventValidator.validateId,\n      SubmitEventValidator.validateComment,\n      InterventionController.editInterventionComment,\n    );\n\n    this.router.delete(\n      INTERVENTION_STATUS_LINK,\n      TokenVerification.userAuthentication,\n      SubmitEventValidator.validateId,\n      InterventionController.deleteIntervention,\n    );\n\n    this.router.patch(\n      INTERVENTION_STATUS_LINK,\n      TokenVerification.userAuthentication,\n      TokenVerification.adminAuthentication,\n      SubmitEventValidator.validateId,\n      SubmitEventValidator.validateStatus,\n      InterventionController.updateInterventionStatus,\n    );\n\n    \n    this.router.get(\n      '/users/:id/interventions/',\n      TokenVerification.userAuthentication,\n      SubmitEventValidator.validateId,\n     InterventionController.usersInterventions,\n    );\n    \n    return this.router;\n  }\n}\n\nexport default InterventionRoutes;\n"],"file":"intervention_routes.js"}