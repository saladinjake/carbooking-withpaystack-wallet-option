{"version":3,"sources":["../../../../server/dynamic_server/mongo_api/api/feedback_routes.js"],"names":["SUBMIT_INTERVENTION_LINK","feedback_GET_SPECIFIC_LINK","INTERVENTION_LOCATION_LINK","INTERVENTION_COMMENT_LINK","INTERVENTION_STATUS_LINK","InterventionRoutes","router","post","TokenVerification","userAuthentication","SubmitEventValidator","validateSubmit","InterventionController","createIntervention","get","allInterventions","validateId","interventionId","patch","validateLocation","interventionLocation","validateComment","editInterventionComment","deleteIntervention","adminAuthentication","validateStatus","updateInterventionStatus","usersInterventions"],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAAA;;AACA;;AACA;;AACA;AACA,IAAMA,wBAAwB,2BAAG,WAAH,CAA9B;AACA,IAAMC,0BAA0B,2BAAG,eAAH,CAAhC;AACA,IAAMC,0BAA0B,2BAAG,wBAAH,CAAhC;AACA,IAAMC,yBAAyB,2BAAG,uBAAH,CAA/B;AACA,IAAMC,wBAAwB,2BAAG,sBAAH,CAA9B;;IACMC,kB;;;AACJ,8BAAYC,MAAZ,EAAoB;AAAA;AAAA;AAAA;AAClB;AACA,SAAKA,MAAL,GAAcA,MAAd;AACD;;;;mCAEc;AAAA;AAAA;AAEb,WAAKA,MAAL,CAAYC,IAAZ,CACE,WADF,EAEEC,4BAAkBC,kBAFpB,EAGEC,2BAAqBC,cAHvB,EAIEC,gCAAuBC,kBAJzB;AAFa;AASb,WAAKP,MAAL,CAAYQ,GAAZ,CACEd,wBADF,EAEEQ,4BAAkBC,kBAFpB,EAGEG,gCAAuBG,gBAHzB;AATa;AAeb,WAAKT,MAAL,CAAYQ,GAAZ,CACEb,0BADF,EAEEO,4BAAkBC,kBAFpB,EAGEC,2BAAqBM,UAHvB,EAIEJ,gCAAuBK,cAJzB;AAfa;AAsBb,WAAKX,MAAL,CAAYY,KAAZ,CACEhB,0BADF,EAEEM,4BAAkBC,kBAFpB,EAGEC,2BAAqBM,UAHvB,EAIEN,2BAAqBS,gBAJvB,EAKEP,gCAAuBQ,oBALzB;AAtBa;AA8Bb,WAAKd,MAAL,CAAYY,KAAZ,CACEf,yBADF,EAEEK,4BAAkBC,kBAFpB,EAGEC,2BAAqBM,UAHvB,EAIEN,2BAAqBW,eAJvB,EAKET,gCAAuBU,uBALzB;AA9Ba;AAsCb,WAAKhB,MAAL,WACEF,wBADF,EAEEI,4BAAkBC,kBAFpB,EAGEC,2BAAqBM,UAHvB,EAIEJ,gCAAuBW,kBAJzB;AAtCa;AA6Cb,WAAKjB,MAAL,CAAYY,KAAZ,CACEd,wBADF,EAEEI,4BAAkBC,kBAFpB,EAGED,4BAAkBgB,mBAHpB,EAIEd,2BAAqBM,UAJvB,EAKEN,2BAAqBe,cALvB,EAMEb,gCAAuBc,wBANzB;AA7Ca;AAuDb,WAAKpB,MAAL,CAAYQ,GAAZ,CACE,sBADF,EAEEN,4BAAkBC,kBAFpB,EAGEC,2BAAqBM,UAHvB,EAICJ,gCAAuBe,kBAJxB;AAvDa;AA8Db,aAAO,KAAKrB,MAAZ;AACD;;;;;eAGYD,kB","sourcesContent":["import InterventionController from '../controllers/feedback_controller';\nimport TokenVerification from '../middlewares/token_validator';\nimport SubmitEventValidator from '../middlewares/post_sanitizer';\n// import BridgeRoutes from './routes';\nconst SUBMIT_INTERVENTION_LINK = '/feedback';\nconst feedback_GET_SPECIFIC_LINK = '/feedback/:id';\nconst INTERVENTION_LOCATION_LINK = '/feedback/:id/location';\nconst INTERVENTION_COMMENT_LINK = '/feedback/:id/comment';\nconst INTERVENTION_STATUS_LINK = '/feedback/:id/status';\nclass InterventionRoutes {\n  constructor(router) {\n    // super(router);\n    this.router = router;\n  }\n\n  attachRoutes() {\n   \n    this.router.post(\n      '/feedback',\n      TokenVerification.userAuthentication,\n      SubmitEventValidator.validateSubmit,\n      InterventionController.createIntervention,\n    );\n\n    this.router.get(\n      SUBMIT_INTERVENTION_LINK,\n      TokenVerification.userAuthentication,\n      InterventionController.allInterventions,\n    );\n\n    this.router.get(\n      feedback_GET_SPECIFIC_LINK,\n      TokenVerification.userAuthentication,\n      SubmitEventValidator.validateId,\n      InterventionController.interventionId,\n    );\n\n    this.router.patch(\n      INTERVENTION_LOCATION_LINK,\n      TokenVerification.userAuthentication,\n      SubmitEventValidator.validateId,\n      SubmitEventValidator.validateLocation,\n      InterventionController.interventionLocation,\n    );\n\n    this.router.patch(\n      INTERVENTION_COMMENT_LINK,\n      TokenVerification.userAuthentication,\n      SubmitEventValidator.validateId,\n      SubmitEventValidator.validateComment,\n      InterventionController.editInterventionComment,\n    );\n\n    this.router.delete(\n      INTERVENTION_STATUS_LINK,\n      TokenVerification.userAuthentication,\n      SubmitEventValidator.validateId,\n      InterventionController.deleteIntervention,\n    );\n\n    this.router.patch(\n      INTERVENTION_STATUS_LINK,\n      TokenVerification.userAuthentication,\n      TokenVerification.adminAuthentication,\n      SubmitEventValidator.validateId,\n      SubmitEventValidator.validateStatus,\n      InterventionController.updateInterventionStatus,\n    );\n\n    \n    this.router.get(\n      '/users/:id/feedback/',\n      TokenVerification.userAuthentication,\n      SubmitEventValidator.validateId,\n     InterventionController.usersInterventions,\n    );\n    \n    return this.router;\n  }\n}\n\nexport default InterventionRoutes;\n"],"file":"feedback_routes.js"}