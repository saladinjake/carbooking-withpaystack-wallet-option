{"version":3,"sources":["../../../../server/dynamic_server/mongo_api/models/SOS.model.js"],"names":["SOSSchema","mongoose","Schema","id","type","Number","user_id","String","username","email","phone_number","plate_number","location","_user","Types","ObjectId","ref","address","media","Array","status","created_at","Date","now","updated_at","collection","timestamps","createdAt","updatedAt","statics","get","findOne","exec","then","user","err","Error","Promise","reject","getAllRedflags","callback","limit","find","getRedflagById","addRedflag","intervention","create","updateRedflagLocation","options","query","_id","update","findOneAndUpdate","updateRedflagComment","comment","updateRedflagStatus","removeRedflag","remove","module","exports","model"],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAAA;;AACA;;AACA;;AACA;AACA;AACA;AACA,IAAIA,SAAS,2BAAG,IAAIC,qBAASC,MAAb,CACd;AACEC,EAAAA,EAAE,EAAE;AACFC,IAAAA,IAAI,EAAEC;AADJ,GADN;AAIEC,EAAAA,OAAO,EAAE;AACPF,IAAAA,IAAI,EAAEG;AADC,GAJX;AAQEC,EAAAA,QAAQ,EAAE;AACRJ,IAAAA,IAAI,EAAEG;AADE,GARZ;AAWEE,EAAAA,KAAK,EAAE;AACLL,IAAAA,IAAI,EAAEG;AADD,GAXT;AAcEG,EAAAA,YAAY,EAAE;AACZN,IAAAA,IAAI,EAAEG;AADM,GAdhB;AAkBEI,EAAAA,YAAY,EAAE;AACZP,IAAAA,IAAI,EAAEG;AADM,GAlBhB;AAsBEK,EAAAA,QAAQ,EAAE;AACRR,IAAAA,IAAI,EAAEG;AADE,GAtBZ;AAyBEM,EAAAA,KAAK,EAAE;AACLT,IAAAA,IAAI,EAAEH,qBAASC,MAAT,CAAgBY,KAAhB,CAAsBC,QADvB;AAELC,IAAAA,GAAG,EAAE;AAFA,GAzBT;AA6BEC,EAAAA,OAAO,EAAE;AACPb,IAAAA,IAAI,EAAEG;AADC,GA7BX;AAgCEW,EAAAA,KAAK,EAAE;AACLd,IAAAA,IAAI,EAAEe;AADD,GAhCT;AAmCEC,EAAAA,MAAM,EAAEb,MAnCV;AAoCEc,EAAAA,UAAU,EAAE;AACVjB,IAAAA,IAAI,EAAEkB,IADI;AAEV,eAASA,IAAI,CAACC;AAFJ,GApCd;AAwCEC,EAAAA,UAAU,EAAE;AACVpB,IAAAA,IAAI,EAAEkB,IADI;AAEV,eAASA,IAAI,CAACC;AAFJ;AAxCd,CADc,EA8Cd;AACEE,EAAAA,UAAU,EAAE,kBADd;AAEEC,EAAAA,UAAU,EAAE;AAAEC,IAAAA,SAAS,EAAE,YAAb;AAA2BC,IAAAA,SAAS,EAAE;AAAtC;AAFd,CA9Cc,CAAH,CAAb;AAoDA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;;AACA5B,SAAS,CAAC6B,OAAV,GAAoB;AAClB;AACF;AACA;AACA;AACA;AACEC,EAAAA,GANkB,eAMd3B,EANc,EAMV;AAAA;AAAA;AACN,WAAO,KAAK4B,OAAL,CAAa5B,EAAb,EACJ6B,IADI,GAEJC,IAFI,CAEC,UAAAC,IAAI,EAAI;AAAA;AAAA;;AACZ,UAAIA,IAAJ,EAAU;AAAA;AAAA;AACR,eAAOA,IAAP;AACD,OAFD;AAAA;AAAA;;AAGA,UAAMC,GAAG,2BAAG,IAAIC,KAAJ,CAAU,sBAAV,CAAH,CAAT;AAJY;AAKZ,aAAOC,OAAO,CAACC,MAAR,CAAeH,GAAf,CAAP;AACD,KARI,CAAP;AASD,GAhBiB;AAkBlB;AAEA;AACA;AACAI,EAAAA,cAtBkB,0BAsBHC,QAtBG,EAsBOC,KAtBP,EAsBc;AAAA;AAAA;AAC9B,WAAO,KAAKC,IAAL,CAAUF,QAAV,EAAoBC,KAApB,CAA0BA,KAA1B,CAAP;AACD,GAxBiB;AA0BlB;AACAE,EAAAA,cA3BkB,0BA2BHxC,EA3BG,EA2BCqC,QA3BD,EA2BW;AAAA;AAAA;AAC3B,WAAO,KAAKT,OAAL,CAAa5B,EAAb,EAAiBqC,QAAjB,CAAP;AACD,GA7BiB;AA+BlB;AACAI,EAAAA,UAhCkB,sBAgCPC,YAhCO,EAgCOL,QAhCP,EAgCiB;AAAA;AAAA;AACjC,WAAO,KAAKM,MAAL,CAAYD,YAAZ,EAA0BL,QAA1B,CAAP;AACD,GAlCiB;AAoClB;AACAO,EAAAA,qBArCkB,iCAqCI5C,EArCJ,EAqCQ0C,YArCR,EAqCsBG,OArCtB,EAqC+BR,QArC/B,EAqCyC;AAAA;AACzD,QAAIS,KAAK,4BAAG;AAAEC,MAAAA,GAAG,EAAE/C;AAAP,KAAH,CAAT;AACA,QAAIgD,MAAM,4BAAG;AACXvC,MAAAA,QAAQ,EAAEiC,YAAY,CAACjC;AADZ,KAAH,CAAV;AAFyD;AAKzD,WAAO,KAAKwC,gBAAL,CAAsBH,KAAtB,EAA6BE,MAA7B,EAAqCH,OAArC,EAA8CR,QAA9C,CAAP;AACD,GA3CiB;AA6ClBa,EAAAA,oBA7CkB,gCA6CGlD,EA7CH,EA6CO0C,YA7CP,EA6CqBG,OA7CrB,EA6C8BR,QA7C9B,EA6CwC;AAAA;AACxD,QAAIS,KAAK,4BAAG;AAAEC,MAAAA,GAAG,EAAE/C;AAAP,KAAH,CAAT;AACA,QAAIgD,MAAM,4BAAG;AACXG,MAAAA,OAAO,EAAET,YAAY,CAACS;AADX,KAAH,CAAV;AAFwD;AAKxD,WAAO,KAAKF,gBAAL,CAAsBH,KAAtB,EAA6BE,MAA7B,EAAqCH,OAArC,EAA8CR,QAA9C,CAAP;AACD,GAnDiB;AAqDlBe,EAAAA,mBArDkB,+BAqDEpD,EArDF,EAqDM0C,YArDN,EAqDoBG,OArDpB,EAqD6BR,QArD7B,EAqDuC;AAAA;AACvD,QAAIS,KAAK,4BAAG;AAAEC,MAAAA,GAAG,EAAE/C;AAAP,KAAH,CAAT;AACA,QAAIgD,MAAM,4BAAG;AACX/B,MAAAA,MAAM,EAAEyB,YAAY,CAACzB;AADV,KAAH,CAAV;AAFuD;AAKvD,WAAO,KAAKgC,gBAAL,CAAsBH,KAAtB,EAA6BE,MAA7B,EAAqCH,OAArC,EAA8CR,QAA9C,CAAP;AACD,GA3DiB;AA6DlB;AACAgB,EAAAA,aA9DkB,yBA8DJrD,EA9DI,EA8DAqC,QA9DA,EA8DU;AAAA;AAC1B,QAAIS,KAAK,4BAAG;AAAEC,MAAAA,GAAG,EAAE/C;AAAP,KAAH,CAAT;AAD0B;AAE1B,WAAO,KAAKsD,MAAL,CAAYR,KAAZ,EAAmBT,QAAnB,CAAP;AACD;AAjEiB,CAApB;;AAoEAkB,MAAM,CAACC,OAAP,GAAiB1D,qBAAS2D,KAAT,CAAe,UAAf,EAA2B5D,SAA3B,CAAjB","sourcesContent":["import mongoose from 'mongoose';\n/****************************************************************/\n/******* @author saladin jake (Victor juwa) ********************************/\n/******* @desc Express js || ****************/\n// const  SetUpRedFlagsMigrations = () =>{\n// import UserSchema from './User.model.js'\nlet SOSSchema = new mongoose.Schema(\n  {\n    id: {\n      type: Number,\n    },\n    user_id: {\n      type: String,\n    },\n\n    username: {\n      type: String,\n    },\n    email: {\n      type: String,\n    },\n    phone_number: {\n      type: String,\n    },\n\n    plate_number: {\n      type: String,\n    },\n\n    location: {\n      type: String,\n    },\n    _user: {\n      type: mongoose.Schema.Types.ObjectId,\n      ref: 'UserModel',\n    },\n    address: {\n      type: String,\n    },\n    media: {\n      type: Array,\n    },\n    status: String,\n    created_at: {\n      type: Date,\n      default: Date.now,\n    },\n    updated_at: {\n      type: Date,\n      default: Date.now,\n    },\n  },\n  {\n    collection: 'soss_collections',\n    timestamps: { createdAt: 'created_at', updatedAt: 'updated_at' },\n  },\n);\n\n/**\n * Add your\n * - pre-save hooks\n * - validations\n * - virtuals\n */\n\n/**\n * Methods\n */\n\n/**\n * Statics\n */\nSOSSchema.statics = {\n  /**\n   * Get user\n   * @param {ObjectId} id - The objectId of user.\n   * @returns {Promise<User, APIError>}\n   */\n  get(id) {\n    return this.findOne(id)\n      .exec()\n      .then(user => {\n        if (user) {\n          return user;\n        }\n        const err = new Error('No such user exists!');\n        return Promise.reject(err);\n      });\n  },\n\n  //Not In Use but just here for example purposes becouse am using mongoose promise\n\n  // in order to use this you have to comment the code  mongoose.Promise = Promise; in db.js\n  // Get Interventions\n  getAllRedflags(callback, limit) {\n    return this.find(callback).limit(limit);\n  },\n\n  // Get Intervention\n  getRedflagById(id, callback) {\n    return this.findOne(id, callback);\n  },\n\n  // Add Intervention\n  addRedflag(intervention, callback) {\n    return this.create(intervention, callback);\n  },\n\n  // Update Intervention\n  updateRedflagLocation(id, intervention, options, callback) {\n    var query = { _id: id };\n    var update = {\n      location: intervention.location,\n    };\n    return this.findOneAndUpdate(query, update, options, callback);\n  },\n\n  updateRedflagComment(id, intervention, options, callback) {\n    var query = { _id: id };\n    var update = {\n      comment: intervention.comment,\n    };\n    return this.findOneAndUpdate(query, update, options, callback);\n  },\n\n  updateRedflagStatus(id, intervention, options, callback) {\n    var query = { _id: id };\n    var update = {\n      status: intervention.status,\n    };\n    return this.findOneAndUpdate(query, update, options, callback);\n  },\n\n  // Delete Intervention\n  removeRedflag(id, callback) {\n    var query = { _id: id };\n    return this.remove(query, callback);\n  },\n};\n\nmodule.exports = mongoose.model('SOSModel', SOSSchema);\n"],"file":"SOS.model.js"}