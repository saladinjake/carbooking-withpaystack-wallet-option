{"version":3,"sources":["../../../../server/dynamic_server/mongo_api/models/User.model.js"],"names":["Promise","require","httpStatus","omitBy","isNil","APIError","autoIncrement","env","jwtSecret","jwtExpirationInterval","masterAccount","masterAccountPassword","uuidv4","initialize","db","getInstance","getEstablishedConnection","roles","UserSchema","mongoose","Schema","id","type","Number","firstname","String","status","user_type","plan_name","lastname","for_users","Boolean","usergroup_set","Array","test_certificate","test_center","test_center_address","isVerified","is_active","avatar","notification_count","balance","old_balance","view_payments","view_transactions","view_quotations","view_cars","view_drivers","view_partners","view_sos","view_package","view_bookings","view_tickets","view_faqs","view_settings","view_users","view_admins","manage_payments","manage_transactions","manage_quotations","manage_cars","manage_drivers","manage_partners","manage_sos","manage_package","manage_bookings","manage_tickets","manage_faqs","manage_settings","manage_users","manage_admins","passwordResetToken","passwordResetExpires","Date","username","email","password","phone_number","is_admin","created_at","now","updated_at","facebook","token","name","google","amount","reference","identity_card","car_assigned_name","assigned_car_plate_number","assigned_driver_location","geometry","coordinates","index","location","socket_id","collection","timestamps","createdAt","updatedAt","set","getters","virtuals","method","transform","transformed","fields","forEach","field","statics","transformBalance","user","addUser","callback","create","get","findOne","exec","then","err","Error","reject","listUsers","skip","limit","find","sort","upsertFbUser","accessToken","refreshToken","profile","cb","that","newUser","fullName","displayName","emails","value","facebookProvider","save","error","savedUser","console","log","getId","Types","ObjectId","isValid","findById","customer","message","NOT_FOUND","getMasterAccount","masterAccountData","accountNumber","role","findAndGenerateToken","options","refreshObject","UNAUTHORIZED","isPublic","passwordMatches","customerEmail","list","page","perPage","checkDuplicateEmail","code","errors","messages","CONFLICT","stack","upsertGoogleUser","googleProvider","plugin","model","startAt","incrementBy","module","exports"],"mappings":"AAAA;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;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","sourcesContent":["'use strict';\nconst Promise = require('bluebird');\nimport mongoose from  'mongoose';\n\nconst httpStatus = require('http-status');\nconst { omitBy, isNil } = require('lodash');\nconst APIError = require('../utils/APIError');\nconst autoIncrement = require('../services/mongooseAutoIncrement');\nconst { env, jwtSecret, jwtExpirationInterval, masterAccount, masterAccountPassword } = require('../config/vars');\nconst uuidv4 = require('uuid/v4');\nimport db from './db';\n\nautoIncrement.initialize(db.getInstance().getEstablishedConnection());\n\n/**\n* Customer Roles\n*/\nconst roles = ['user', 'admin'];\n\n//const  SetUpUserMigrations = () =>{\n      /**\n       * User Schema\n       */\nlet UserSchema = new mongoose.Schema({\n      id :{\n          type: Number, \n          default: 0\n      },\n      firstname: {\n          type: String,\n          \n      },\n\n      status:{\n        type:String,\n        enum:[\n         \"Active\",\n         \"Dormant\",\n         \"Disabled\",\n         \"Suspended\"\n        ],\n        default: \"Active\"\n      },\n      user_type: {\n        type: String,\n        enum:[\n        'Individual', \n        'Corporate',\n        \n\n        ],\n        default: 'Individual'\n      },\n      plan_name:{\n        type:String,\n        default: \"commute saver\"\n      },\n      lastname : {\n        type: String,\n        \n      },\n      roles: { \n        type: String , \n        // enum: [\n        //        'user', \n        //        'simple_admin', \n        //        'super_admin',\n        //        'Simple Admin',\n        //        'Moderator Admin',\n        //        'Super Admin', \n        // ], \n        default:'user'\n            \n      },\n\n      for_users: {\n        type:Boolean,\n        default:true,\n      },\n\n      usergroup_set:{\n        type:Array,\n        default:[\n        'Simple Admin', \n          'Moderator Admin',\n          'Super Admin', \n          'Inspection Manager',\n          'Partners Manager',\n          'Hr',\n          'Accountant',\n        ]\n      },\n      test_certificate:{\n        type: String,\n        default:\"NO-CERTIFICATE-ISSUED\"\n      \n      },\n\n      test_center:{\n        type: String,\n        default:\"NO-CERTER-YET\"\n        \n      \n      },\n\n      test_center_address:{\n        type:String,\n        default:\"NO-TESTCENTER-ADDRESS-YET\"\n    \n      \n      },\n      isVerified: { \n          type: Boolean, \n        \n          default: false \n      },\n      is_active: {\n        type:String, \n        default: true\n      },\n      avatar:{\n        type: String,\n        default:\"\"\n      },\n      notification_count: {\n        type:Number,\n        default:0\n      },\n      balance: {\n        type: String,\n        default: '0.00'\n      },\n      old_balance:{\n        type:String,\n        default:'0.00'\n      },\n\n      // previledges_rules: {\n      //   type: Array,\n      // },\n\n\n      view_payments:{\n         type: String,\n        default: 'yes',\n       }, \n        view_transactions:{\n         type: String,\n             //default:'yes',\n        },\n        // view_payments:{\n        //  type: String,\n        //       //default:'yes',\n        //  },\n        view_quotations:{\n         type: String,\n              //default:'yes',\n         },\n        view_cars:{\n         type: String,\n              //default:'yes',\n         },\n        view_drivers:{\n         type: String,\n              //default:'yes',\n         },\n        view_partners:{\n         type: String,\n         //default:'yes',\n         },\n        view_sos:{\n         type: String,\n              //default:'yes',\n         },\n        view_package:{\n         type: String,\n             //default:'yes',\n        },\n        view_bookings:{\n         type: String,\n             //default:'yes',\n      },\n\n\n      view_tickets:{\n         type: String,\n             //default:'yes',\n      },\n\n      view_faqs:{\n         type: String,\n             //default:'yes',\n      },\n\n      view_settings:{\n         type: String,\n             //default:'yes',\n      },\n\n      view_users:{\n         type: String,\n             //default:'yes',\n      },\n\n      view_admins:{\n         type: String,\n             //default:'yes',\n      },\n\n\n\n\n\n\n      manage_payments:{\n         type: String,\n        default: 'yes',\n       }, \n        manage_transactions:{\n         type: String,\n             //default:'yes',\n        },\n        manage_quotations:{\n         type: String,\n              //default:'yes',\n         },\n        manage_cars:{\n         type: String,\n              //default:'yes',\n         },\n        manage_drivers:{\n         type: String,\n              //default:'yes',\n         },\n        manage_partners:{\n         type: String,\n         //default:'yes',\n         },\n        manage_sos:{\n         type: String,\n              //default:'yes',\n         },\n        manage_package:{\n         type: String,\n             //default:'yes',\n        },\n        manage_bookings:{\n         type: String,\n             //default:'yes',\n      },\n\n\n      manage_tickets:{\n         type: String,\n             //default:'yes',\n      },\n\n      manage_faqs:{\n         type: String,\n             //default:'yes',\n      },\n\n      manage_settings:{\n         type: String,\n             //default:'yes',\n      },\n\n      manage_users:{\n         type: String,\n             //default:'yes',\n      },\n\n      manage_admins:{\n         type: String,\n             //default:'yes',\n      },\n\n      passwordResetToken: { type: String},\n      passwordResetExpires: { type: Date },\n       \n      username : {\n          type: String,\n          \n      },\n      email : {\n        type: String,\n          \n      },\n        password :{\n          type: String,   \n        },\n        phone_number : {\n          type: String,\n        \n          //match: [/^[1-9][0-9]{9}$/, 'The value of path {PATH} ({VALUE}) is not a valid mobile number.']\n        },\n        is_admin:{ \n          type:Boolean,\n          default:false\n        },\n        created_at : {\n          type: Date,\n          default: Date.now\n        },\n        updated_at :{\n          type: Date,\n          default: Date.now\n        },\n        \n        facebook: {\n          id: String,\n          token: String,\n          email: String,\n          name: String\n        },\n        google: {\n            id: String,\n            token: String,\n            email: String,\n            name: String\n        },\n\n        amount: {\n        type: Number, \n       \n    },\n    reference: {\n        type: String, \n        \n    },\n\n    //if user is a driver\n\n    identity_card:{\n        type: String,\n        \n      },\n      \n\n\n      car_assigned_name: {\n        type: Array,\n      },\n\n      assigned_car_plate_number:{\n       type:String\n      },\n\n      assigned_driver_location:{\n          type: String,\n        },\n\n      geometry: {\n          coordinates: { type: [Number], index: '2dsphere'}\n      },\n\n      location: {\n       type: { type: String },\n       coordinates: []\n      },\n\n        socket_id: {\n          type: String\n        },\n  \n\n      },{\n        collection: 'users_collections',\n        timestamps: { createdAt: 'created_at', updatedAt: 'updated_at' }\n});\n\nUserSchema.set('toJSON', {getters: true, virtuals: true});\n\n      \n      /**\n       * Methods\n       */\n      UserSchema.method({\n        \n          transform() {\n            const transformed = {};\n            const fields = ['id', 'accountNumber', 'name', 'email', 'role', 'created_at'];\n\n            fields.forEach((field) => {\n              transformed[field] = this[field];\n            });\n\n            return transformed;\n          },\n      });\n\n      /**\n       * Statics\n       */\n      UserSchema.statics = {\n              transformBalance(user) {\n            \n              \n\n               return user.balance;\n             },\n             // Add Intervention\n            addUser  (user, callback)  {\n              return this.create(user, callback);\n            },\n\n            get(id) {\n              return this.findOne(id)\n                .exec()\n                .then((user) => {\n                  if (user) {\n                    return user;\n                  }\n                  const err = new Error('No such user exists!');\n                  return Promise.reject(err);\n                });\n            },\n\n            \n            listUsers({ skip = 0, limit = 50 } = {}) {\n              return this.find()\n                .sort({ created_at: -1 })\n                .skip(+skip)\n                .limit(+limit)\n                .exec();\n            },\n\n            \n        upsertFbUser(accessToken, refreshToken, profile, cb) {\n            var that = this;\n            return this.findOne({\n                'facebookProvider.id': profile.id\n            }, function(err, user) {\n                // no user was found, lets create a new one\n                if (!user) {\n                    var newUser = new that({\n                        fullName: profile.displayName,\n                        email: profile.emails[0].value,\n                        facebookProvider: {\n                            id: profile.id,\n                            token: accessToken\n                        }\n                    });\n\n                    newUser.save(function(error, savedUser) {\n                        if (error) {\n                            console.log(error);\n                        }\n                        return cb(error, savedUser);\n                    });\n                } else {\n                    return cb(err, user);\n                }\n            });\n        },\n\n    async getId(id) {\n    try {\n      let customer;\n\n      if (mongoose.Types.ObjectId.isValid(id)) {\n        customer = await this.findById(id).exec();\n      }\n      if (customer) {\n        return customer;\n      }\n\n      throw new APIError({\n        message: 'Customer does not exist',\n        status: httpStatus.NOT_FOUND,\n      });\n    } catch (error) {\n      throw error;\n    }\n  },\n\n  /**\n   * Get Master Account\n   *\n   * @returns {Promise<Customer>}\n   */\n  async getMasterAccount() {\n    const masterAccountData = {\n      accountNumber: masterAccount,\n      role: 'admin',\n      name: 'Master Account',\n      email: 'master_account@bank.com',\n      password: masterAccountPassword,\n    };\n    try {\n      let customer = await this.findOne({ 'accountNumber': masterAccountData.accountNumber }).exec();\n      \n      if (customer) {\n        return customer;\n      }else{\n        return await this.create(masterAccountData);\n      }      \n    } catch (error) {\n      throw error;\n    }\n  },\n\n  /**\n   * Find customer by email and tries to generate a JWT token\n   *\n   * @param {ObjectId} id - The objectId of customer.\n   * @returns {Promise<Customer, APIError>}\n   */\n  async findAndGenerateToken(options) {\n    const { email, password, refreshObject } = options;\n    if (!email) throw new APIError({ message: 'An email is required to generate a token' });\n\n    const customer = await this.findOne({ email }).exec();\n    const err = {\n      status: httpStatus.UNAUTHORIZED,\n      isPublic: true,\n    };\n    if (password) {\n      if (customer && await customer.passwordMatches(password)) {\n        return { customer, accessToken: customer.token() };\n      }\n      err.message = 'Incorrect email or password';\n    } else if (refreshObject && refreshObject.customerEmail === email) {\n      return { customer, accessToken: customer.token() };\n    } else {\n      err.message = 'Incorrect email or refreshToken';\n    }\n    throw new APIError(err);\n  },\n\n  /**\n   * List customers in descending order of 'createdAt' timestamp.\n   *\n   * @param {number} skip - Number of customers to be skipped.\n   * @param {number} limit - Limit number of customers to be returned.\n   * @returns {Promise<Customer[]>}\n   */\n  list({\n    page = 1, perPage = 30, name, email, role,\n  }) {\n    const options = omitBy({ name, email, role }, isNil);\n\n    return this.find(options)\n      .sort({ createdAt: -1 })\n      .skip(perPage * (page - 1))\n      .limit(perPage)\n      .exec();\n  },\n\n  /**\n   * Return new validation error\n   * if error is a mongoose duplicate key error\n   *\n   * @param {Error} error\n   * @returns {Error|APIError}\n   */\n  checkDuplicateEmail(error) {\n    if (error.name === 'MongoError' && error.code === 11000) {\n      return new APIError({\n        message: 'Validation Error',\n        errors: [{\n          field: 'email',\n          location: 'body',\n          messages: ['\"email\" already exists'],\n        }],\n        status: httpStatus.CONFLICT,\n        isPublic: true,\n        stack: error.stack,\n      });\n    }\n    return error;\n  },\n\n  upsertGoogleUser(accessToken, refreshToken, profile, cb) {\n      var that = this;\n      return this.findOne({\n                'googleProvider.id': profile.id\n      }, function(err, user) {\n                // no user was found, lets create a new one\n                if (!user) {\n                    var newUser = new that({\n                        fullName: profile.displayName,\n                        email: profile.emails[0].value,\n                        googleProvider: {\n                            id: profile.id,\n                            token: accessToken\n                        }\n                    });\n\n                    newUser.save(function(error, savedUser) {\n                        if (error) {\n                            console.log(error);\n                        }\n                        return cb(error, savedUser);\n                    });\n                } else {\n                    return cb(err, user);\n                }\n            });\n        },\n}\n\nUserSchema.plugin(autoIncrement.plugin, {\n  model: 'UserModel',\n  field: 'accountNumber',\n  startAt: 1001,\n  incrementBy: 1\n});     \n\nmodule.exports = mongoose.model('UserModel', UserSchema);\n\n\n\n\n\n"],"file":"User.model.js"}